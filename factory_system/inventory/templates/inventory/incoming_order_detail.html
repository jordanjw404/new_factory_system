{% extends "core/base.html" %}
{% block content %}

<h2>ðŸ“„ Incoming Order #{{ order.id }}</h2>
<p class="text-muted">Supplier: <strong>{{ order.supplier.name }}</strong> | Expected: {{ order.expected_date }}</p>

<table class="table table-sm table-bordered table-striped text-center align-middle">
  <thead class="table-light">
    <tr>
      <th>Item</th><th>Expected</th><th>Received</th><th>Location</th><th>Cost</th><th>Missing</th>
    </tr>
  </thead>
  <tbody>
    {% for item in items %}
    <tr>
      <td>{{ item.item.code }}</td>
      <td>{{ item.quantity_expected }}</td>
      <td>{{ item.quantity_received }}</td>
      <td>{{ item.location }}</td>
      <td>Â£{{ item.unit_cost|default:"â€”" }}</td>
      <td>
        {% if item.is_missing %}
          <span class="badge bg-danger">Yes</span>
        {% elif item.quantity_received < item.quantity_expected %}
          <span class="badge bg-warning text-dark">Short</span>
        {% else %}
          <span class="badge bg-success">OK</span>
        {% endif %}
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="6" class="text-muted text-center">No items recorded.</td></tr>
    {% endfor %}
  </tbody>
</table>

<a href="{% url 'incoming-order-list' %}" class="btn btn-sm btn-secondary mt-3">â¬… Back to Incoming Orders</a>

{% endblock %}
